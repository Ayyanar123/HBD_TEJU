<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>To My Dearest Teju Maanam ‚Äî Our Memories</title>

  <!-- Fonts & Libraries -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Great+Vibes&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/ScrollTrigger.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/catdad/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    :root{
      --bg-1:#fff6fb; --accent:#ff4d8a; --accent-2:#ff9db9; --muted:#6d6d78; --card:#ffffff;
      --glass:rgba(255,255,255,0.72);
      --max-width:1100px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Poppins,system-ui,-apple-system,'Segoe UI',Roboto;color:#222;background:linear-gradient(180deg,var(--bg-1),#fff0f5);-webkit-font-smoothing:antialiased;scroll-behavior:smooth;-webkit-font-smoothing:antialiased}
    a{color:inherit}

    /* Top navigation */
    nav.topbar{position:fixed;top:18px;left:50%;transform:translateX(-50%);z-index:1200;background:var(--glass);backdrop-filter: blur(8px);padding:8px 14px;border-radius:999px;box-shadow:0 10px 30px rgba(17,20,40,0.06);display:flex;gap:10px;align-items:center}
    nav.topbar a{color:#333;padding:8px 12px;border-radius:999px;font-weight:600;text-decoration:none;white-space:nowrap}
    nav.topbar a.active{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff}

    /* Hero */
    .hero{min-height:88vh;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;padding:40px 20px}
    #hero-canvas{position:absolute;inset:0;z-index:0;pointer-events:none}
    .hero-inner{position:relative;z-index:2;text-align:center;padding:24px;max-width:980px}
    .hero-inner h1{font-family:'Playfair Display',serif;font-size:3.2rem;color:#fff;text-shadow:0 20px 50px rgba(255,77,138,0.18);margin:0}
    .hero-sub{color:rgba(255,255,255,0.95);margin-top:12px;font-size:1.05rem}
    .hero-cta{display:flex;gap:12px;justify-content:center;margin-top:22px;flex-wrap:wrap}
    .btn{border:0;padding:12px 18px;border-radius:999px;font-weight:700;cursor:pointer;box-shadow:0 8px 24px rgba(12,18,30,0.06);transition:transform .18s ease,box-shadow .18s ease}
    .btn:active{transform:translateY(1px)}
    .btn-primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff}
    .btn-ghost{background:transparent;color:#fff;border:1px solid rgba(255,255,255,0.12)}
    .btn-link{background:transparent;color:var(--accent);border:0;padding:8px 12px;border-radius:8px;font-weight:600}

    /* container */
    .container{max-width:var(--max-width);margin:80px auto;padding:0 20px}
    section{padding:80px 0;position:relative}
    h2{font-family:'Playfair Display',serif;font-size:2.2rem;color:var(--accent);margin-bottom:10px}
    p.lead{color:var(--muted);max-width:820px;margin:0 auto 18px}

    /* cards */
    .card{background:var(--card);border-radius:18px;padding:22px;box-shadow:0 20px 40px rgba(12,18,30,0.06)}

    /* polaroids */
    .polaroids{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:18px}
    .polaroid{background:#fff;padding:14px;border-radius:14px;text-align:center;transform-origin:center;box-shadow:0 18px 50px rgba(12,18,30,0.06);transition:transform .45s}
    .polaroid:hover{transform:translateY(-10px) rotate(-1deg) scale(1.03)}
    .polaroid img{width:100%;height:220px;object-fit:cover;border-radius:10px}

    /* video grid */
    .video-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px}
    .video-thumb{position:relative;border-radius:12px;overflow:hidden;cursor:pointer}

    /* notes */
    .notes{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px}
    .note{padding:18px;background:linear-gradient(180deg,#fff,#fff8fb);border-radius:12px;font-size:0.98rem}

    /* farewell */
    .farewell-wrap{background:linear-gradient(180deg,#fff6fb,#fff0f6);padding:34px;border-radius:18px;box-shadow:0 18px 40px rgba(12,18,30,0.05)}
    .farewell-text{font-family:'Playfair Display',serif;font-size:1.15rem;line-height:1.7;color:#222}

    /* surprise */
    .surprise{display:flex;flex-direction:column;align-items:center;gap:14px}

    /* modal */
    .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(6,6,6,0.6);z-index:2000;padding:20px;opacity:0;pointer-events:none;transition:all .28s ease}
    .modal.open{opacity:1;pointer-events:auto}
    .modal-card{background:linear-gradient(180deg,#fff,#fff6fb);padding:28px;border-radius:18px;max-width:820px;width:100%;text-align:center;box-shadow:0 30px 80px rgba(0,0,0,0.3)}

    /* small UI */
    #cursor{position:fixed;pointer-events:none;z-index:1500;width:18px;height:18px;border-radius:50%}
    .music-fab{position:fixed;right:18px;bottom:18px;z-index:1400;width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:linear-gradient(90deg,var(--accent),var(--accent-2));box-shadow:0 14px 40px rgba(17,24,40,0.16);cursor:pointer;border:none}
    .music-fab:active{transform:translateY(1px)}
    .music-fab svg{width:22px;height:22px;fill:#fff}
    .music-fab[aria-pressed="true"]{box-shadow:0 18px 54px rgba(255,77,138,0.18)}
    .name-script{font-family:'Great Vibes',cursive;font-size:3.6rem;color:#ff5d9b;display:inline-block}

    /* loader */
    #loader{position:fixed;inset:0;background:#fff;display:flex;align-items:center;justify-content:center;z-index:3000;flex-direction:column}
    #loader img{width:120px;height:120px;border-radius:12px;object-fit:cover;box-shadow:0 20px 60px rgba(0,0,0,0.12)}
    #loader h3{margin-top:14px;font-family:'Playfair Display',serif}

    /* signature */
    .signature{font-family:'Great Vibes';font-size:2rem;color:#aa3b6b;opacity:0}

    /* responsive tweaks */
    @media (max-width:900px){
      .hero-inner h1{font-size:2.2rem}
      .hero-sub{font-size:0.98rem}
    }
    @media (max-width:520px){
      .polaroid img{height:160px}
      nav.topbar{left:12px;transform:none}
      .music-fab{right:12px;bottom:12px;width:52px;height:52px}
      .hero{padding:28px 12px}
    }
  </style>
</head>
<body>

  <!-- Loader -->
  <div id="loader" aria-hidden="false">
    <img src="A1.jpg" alt="Teju" />
    <h3>Preparing something special for Teju...</h3>
  </div>

  <!-- top nav -->
  <nav class="topbar" aria-label="Main navigation">
    <a href="#welcome" data-target="welcome" class="active">Welcome</a>
    <a href="#met" data-target="met">How We Met</a>
    <a href="#firsts" data-target="firsts">Our Firsts</a>
    <a href="#trips" data-target="trips">Memories</a>
    <a href="#videos" data-target="videos">Videos</a>
    <a href="#messages" data-target="messages">Letters</a>
    <a href="#farewell" data-target="farewell">Farewell</a>
  </nav>

  <!-- HERO -->
  <header class="hero" id="welcome" aria-labelledby="hero-title">
    <canvas id="hero-canvas" aria-hidden="true"></canvas>

    <div class="hero-inner" data-aos="zoom-in">
      <h1 id="hero-title" style="background: linear-gradient(90deg, #0059ff, #7c3aed); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">To My Dearest <span id="hero-name" class="name-script" style="background: linear-gradient(90deg, #0059ff, #7c3aed); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Teju Maanam</span></h1>
      <p class="hero-sub" style="background: linear-gradient(90deg, #ac79ff, #0091ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Even if life has put distance between us, the moments we shared still glow ‚Äî gentle, imperfect, brave. Today I celebrate you.</p>

      <div class="hero-cta" style="margin-top:18px">
        <button class="btn btn-primary" id="start-journey">Walk Through Our Memories</button>
        
      </div>
    </div>
  </header>

  <main class="container" id="main-content" tabindex="-1">

    <!-- HOW WE MET -->
    <section id="met" data-aos="fade-up">
      <h2>How We Met</h2>
      <p class="lead">The day that began everything: a room, a smile, a hello. Small things that grew into moments I keep replaying.</p>
      <div class="card timeline" data-aos="fade-up">
        <div style="display:flex;gap:18px;flex-wrap:wrap">
          <div style="flex:1;min-width:260px;max-width:360px">
            <div style="width:100%;aspect-ratio:9/16;border-radius:12px;overflow:hidden;">
              <img src="A1.jpg" alt="meet" style="width:100%;height:100%;object-fit:cover;display:block;">
            </div>
          </div>
          <div style="flex:1;min-width:260px"><h3>That First Day</h3><p style="color:var(--muted)">You walked in, and the world felt a little brighter. I didn't know then what a gentle gravity you'd become in my life.The first time I saw you, Teju, I didn‚Äôt know what was happening to me,  
  but something inside shifted in a way I still can‚Äôt fully explain.  
  It was such a simple moment ‚Äî just a room, a glimpse, a smile you didn‚Äôt even  
  realize you gave ‚Äî yet it felt like the world suddenly slowed down long enough  
  for my heart to notice you. I remember standing there, quietly wondering why  
  your presence felt warm, familiar, and strangely comforting, even though we  
  hadn‚Äôt spoken a single word. I didn‚Äôt understand it then, but looking back now,  
  that was the beginning of everything. The beginning of thoughts that stayed,  
  feelings that grew, and moments that I keep replaying in my mind.  
  That first sight of you wasn‚Äôt just a memory ‚Äî it was the start of a story  
  I didn‚Äôt know my heart was waiting for.
        </div>
      </div>
    </section>

    <!-- OUR FIRSTS -->
    <section id="firsts" data-aos="fade-up">
      <h2>Our Firsts</h2>
      <p class="lead">First laugh, first photo, first silence that didn't feel empty ‚Äî each first is still a favorite.</p>
      <div class="polaroids" style="grid-template-columns:repeat(auto-fit,minmax(240px,1fr))">

  <div class="polaroid" data-aos="zoom-in" style="aspect-ratio:9/16">
    <img src="11.jpg" alt="Our First Photo Together" style="height:100%;object-fit:cover">
    <div style="margin-top:8px;font-weight:600">
      Our very first capture ‚Äî a moment that still feels warm whenever I think of it. 
      It wasn‚Äôt just a picture; it was the beginning of a thousand feelings, the start 
      of a story that my heart didn‚Äôt know it was waiting to write with you, Teju.
    </div>
  </div>

  <div class="polaroid" data-aos="zoom-in" style="aspect-ratio:9/16">
    <img src="a2.jpg" alt="First Date" style="height:100%;object-fit:cover">
    <div style="margin-top:8px;font-weight:600">
      Our first date ‚Äî simple, small, yet so unforgettable. I remember watching you talk, 
      your smile, your softness, and thinking how unexpectedly beautiful that moment felt. 
      It was the day I realized that even the quietest moments with you have a way 
      of becoming my favorite memories.
    </div>
  </div>

  <div class="polaroid" data-aos="zoom-in" data-aos-delay="80" style="aspect-ratio:9/16">
    <img src="2.jpg" alt="Laughter" style="height:100%;object-fit:cover">
    <div style="margin-top:8px;font-weight:600">
      This was the day our laughter felt endless, the kind that comes from being 
      completely comfortable with someone. With you, Teju, even the silliest moments 
      turn into memories I never want to forget ‚Äî the type that stay in the heart 
      long after the laughter fades.
    </div>
  </div>

  <div class="polaroid" data-aos="zoom-in" data-aos-delay="160" style="aspect-ratio:9/16">
    <img src="3.jpg" alt="Quiet Moments" style="height:100%;object-fit:cover">
    <div style="margin-top:8px;font-weight:600">
      Quiet moments with you speak louder than words ever could. Just being beside you, 
      feeling your presence, your calmness, your warmth ‚Äî it‚Äôs enough to make the world 
      feel gentle. These soft, silent moments are the ones my heart goes back to the most.
    </div>
  </div>

  <div class="polaroid" data-aos="zoom-in" data-aos-delay="240" style="aspect-ratio:9/16">
    <img src="4.jpg" alt="Adventures" style="height:100%;object-fit:cover">
    <div style="margin-top:8px;font-weight:600">
      Every small step with you feels like an adventure ‚Äî not because of where we go, 
      but because it‚Äôs you beside me. Even the most random walks, talks, and moments 
      become special. With you, Teju, the world looks a little brighter, a little softer.
    </div>
  </div>

  <div class="polaroid" data-aos="zoom-in" data-aos-delay="320" style="aspect-ratio:9/16">
    <img src="5.jpg" alt="A Glance" style="height:100%;object-fit:cover">
    <div style="margin-top:8px;font-weight:600">
      Just one glance from you, and suddenly everything feels different ‚Äî warmer, sweeter, 
      more alive. There‚Äôs something in your eyes, Teju, that speaks a language only my 
      heart understands. A single look from you can turn an ordinary moment into something 
      unforgettable.
    </div>
  </div>

</div>

      </div>
    </section>

    <!-- TRIPS -->
   <section id="trips" data-aos="fade-up">
  <h2>Memories From Our Short Life</h2>
  <p class="lead">
    This careless boy cares more about you, Teja, than he ever shows. 
    Even in the smallest moments, even in the silent ones, your presence 
    becomes the calm he never knew he needed. Every memory with you feels 
    like a soft place to rest, a reminder that his heart chose you long 
    before he understood it.
  </p>

  <div class="card" style="display:flex;gap:18px;flex-wrap:wrap;align-items:center">
    <div style="flex:1;min-width:260px">
      <img src="3.jpg" alt="Mountain Retreat" style="width:100%;border-radius:12px;object-fit:cover;height:220px">
    </div>
    <div style="flex:1;min-width:260px">
      <h3>Whispers in the Mountains</h3>
      <p style="color:var(--muted)">
        A serene escape where the world felt quiet, and our hearts felt understood.  
        Every shared glance, every small laugh, every soft moment became a memory 
        I still hold close.
      </p>
    </div>
  </div>
</section>


    <!-- VIDEOS -->
    <section id="videos" data-aos="fade-up">
      <h2>Videos & Voice Notes</h2>
      <p class="lead">A single clip that still warms my chest. Play it and see our laughter again. Or listen to a voice note, just like old times.</p>

      <div class="video-grid">
        <div class="video-thumb-local card video-thumb" tabindex="0" aria-label="Open Special Video" data-video="Files/v.mp4"
           style="position:relative;aspect-ratio:9/16;max-width:360px;width:100%;height:auto;background:linear-gradient(135deg,#1a0033,#2d0052);border:2px solid #ff4d8a;overflow:hidden;transition:all 0.4s cubic-bezier(0.34,1.56,0.64,1);margin:auto">
          <img src="video-thumb1.jpg" alt="A Special Video" style="width:100%;height:100%;object-fit:cover;opacity:0.95;display:block">
          <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;border:3px solid #ff4d8a;border-radius:50%;animation:pulse-ring 2s ease-in-out infinite;box-shadow:0 0 30px #ff4d8a,inset 0 0 30px rgba(255,77,138,0.3)"></div>
          <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(135deg,#ff4d8a,#ff9db9);border-radius:50%;padding:14px;pointer-events:none;box-shadow:0 0 40px #ff4d8a,0 0 20px rgba(255,77,138,0.6);animation:float-icon 3s ease-in-out infinite">
            <svg width="28" height="28" viewBox="0 0 32 32" aria-hidden="true"><polygon points="13,10 24,16 13,22" fill="#fff"/></svg>
          </div>
        </div>
      </div>

      <div style="text-align:center;margin-top:14px">
        <button class="btn btn-ghost" id="videos-back" aria-label="Back to top">Back to Welcome</button>
      </div>

      <!-- overlay 9:16 viewer -->
      <div id="video-local-overlay" role="dialog" aria-modal="true" aria-hidden="true"
         style="display:none;position:fixed;inset:0;background:rgba(7,7,10,0.78);backdrop-filter:blur(6px);z-index:1600;align-items:center;justify-content:center;padding:18px">
        <div style="max-width:420px;width:100%;aspect-ratio:9/16;background:#000;border-radius:12px;overflow:hidden;position:relative;box-shadow:0 30px 80px rgba(0,0,0,0.6)">
          <video id="video-local-player" controls playsinline style="width:100%;height:100%;object-fit:cover;background:#000"></video>
          <button id="video-local-back" style="position:absolute;left:12px;top:12px;background:rgba(255,255,255,0.06);border:0;color:#fff;padding:8px 12px;border-radius:999px;font-weight:600;backdrop-filter:blur(4px);cursor:pointer">Back</button>
        </div>
      </div>

    </section>

    <!-- MESSAGES / LETTERS -->
    <section id="messages" data-aos="fade-up">
      <h2>Letters to You</h2>
      <p class="lead">Words I couldn't say aloud. Small letters, honest feelings, memories that stay with us forever.</p>
      <div class="notes">
        <div class="note">"Teju, I keep your smile in my pocket for hard days." ‚Äî V</div>
        <div class="note">"You taught me how to find warmth in ordinary moments." ‚Äî R</div>
        <div class="note">"Work won't be the same without you ‚Äî I will miss you." ‚Äî Team</div>
        <div class="note">"Every memory with you is a treasure I hold dear." ‚Äî A</div>
        <div class="note">"The way you listened when I needed to vent made all the difference." ‚Äî S</div>
        <div class="note">"Your laughter could light up the dullest of rooms." ‚Äî M</div>
        <div class="note">"Thank you for being the calm in chaos, always." ‚Äî L</div>
        <div class="note">"Even the smallest moments with you became extraordinary memories." ‚Äî K</div>
        <div class="note">"You inspire me to be kinder, braver, and more patient every day." ‚Äî N</div>
        <div class="note">"No farewell can erase the joy you've given us." ‚Äî All of Us</div>
        <div class="note">"I hope life gives you everything you dream of ‚Äî and more." ‚Äî T</div>
        <div class="note">"Remember, distance doesn\u2019t diminish the bond we\u2019ve shared." ‚Äî V</div>
      </div>
    </section>

    <!-- FAREWELL -->
    <section id="farewell" data-aos="fade-up">
      <h2>Farewell ‚Äî A Note From Me</h2>
      <div class="farewell-wrap card">
        <p class="farewell-text">
          Teju, even though we are not speaking now, I hope these words find a corner of your heart. Leaving the company is a brave step; it doesn't erase what you've given ‚Äî laughter, care, quiet moments that meant everything to me.  
          <br><br>
          I miss our talks, the way your eyes lit up at small jokes, the silent understanding on long days, and the countless little gestures that showed your heart. Every moment with you was a lesson in patience, kindness, and joy.  
          <br><br>
          If you ever wonder whether someone still remembers ‚Äî know that I do. I wish you mornings filled with gentle sunlight, courage that grows steadier with every choice, and the kind of joy that waits patiently for you. May every challenge make you stronger, every smile remind you of your worth, and every dream pull you toward a beautiful tomorrow.  
          <br><br>
          You are stronger than you think, kinder than you know, and loved more than words can wrap. Never forget how special you are, how deeply you touch hearts, and how bright your soul shines. Happy Birthday, Teju. Keep blossoming, keep dreaming, and keep being the incredible person you are.  
          <br><br>
          ‚Äî Always, <strong>Ayyanar</strong>
        </p>
        <div style="margin-top:18px;text-align:center">
          <button class="btn btn-primary" id="cheer-btn">A Little Cheer ‚ú®</button>
        </div>
      </div>
    </section>

     <section id="met" data-aos="fade-up">
  <h2>The Final Story</h2>

  <p class="lead">
    Some stories don‚Äôt begin with grand moments. They begin quietly‚Äîwith a room,
    a smile, a soft hello. Yet somehow those small things turn into memories
    that stay forever, shaping the heart in ways words can barely hold.
  </p>

  <div class="card timeline" data-aos="fade-up">
    <div style="display:flex;gap:18px;flex-wrap:wrap">
      
      <div style="flex:1;min-width:260px;max-width:360px">
        <div style="width:100%;aspect-ratio:9/16;border-radius:12px;overflow:hidden;">
          <img src="final.jpg" alt="meet" style="width:100%;height:100%;object-fit:cover;display:block;">
        </div>
      </div>

      <div style="flex:1;min-width:260px">
        <h3>That First Day</h3>
        <p style="color:var(--muted)">
          The first time I saw you, Teju, something inside me changed quietly,
          beautifully, almost without permission. You walked in, and suddenly the
          world felt a little softer, a little warmer, like my heart had found a
          piece it didn‚Äôt even know was missing.
          <br><br>
          That single moment became the beginning of thoughts that stayed,
          emotions that deepened, and memories I still replay with a smile.
          But beyond all of that‚Äîbeyond the warmth, the connection, and the
          unexplainable comfort you brought‚Äîthere is something I admire even more:
          your strength, your dreams, your future.
          <br><br>
          Teju, your story is still unfolding, and I know you are meant to rise
          higher than you imagine. Your heart is strong, your mind is bright,
          and your future is waiting with open arms. No matter how tough life
          feels sometimes, remember this: you are capable, you are deserving,
          and you are built for beautiful things.  
          <br><br>
          And even if I‚Äôm just a small part of your journey, I will always hope
          your path is filled with light, courage, and everything your heart is
          chasing. Your story doesn‚Äôt end here‚Äîthis is only the beginning of the
          incredible future you‚Äôre meant for.
        </p>
      </div>

    </div>
  </div>
</section>




  </main>

  <footer style="text-align:center;padding:28px 12px">
    <p>Made with ‚ù§Ô∏è by Ayyanar ‚Äî For Teju Maanam</p>
    <div style="margin-top:8px"><span class="signature" id="signature">‚Äî Ayyanar</span></div>
  </footer>

  <!-- Big video modal -->
  <div id="video-modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.75);align-items:center;justify-content:center;z-index:1400;padding:20px">
    <div style="max-width:1000px;width:100%;background:#0b0b0c;border-radius:12px;padding:12px;position:relative">
      <button id="close-video" aria-label="Close video" style="position:absolute;right:12px;top:8px;background:transparent;border:0;color:#fff;font-size:22px;cursor:pointer">‚úï</button>
      <video id="video-player" controls playsinline style="width:100%;border-radius:8px;background:#000"></video>
    </div>
  </div>

  <!-- cursor -->
  <div id="cursor" aria-hidden="true"></div>

  <!-- background music (use Files/Ayyanar.mp3 - ensure file exists in Files/) -->
  <audio id="bg-music" src="Ayyanar.mp3" loop preload="auto"></audio>

  <!-- Floating music button (FAB) -->
  <button class="music-fab" id="music-fab" aria-pressed="false" aria-label="Play background music" title="Play music">
    <!-- icon will be toggled in JS -->
    <svg id="music-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M5 3v18l14-9L5 3z"/></svg>
  </button>

  <!-- welcome popup modal (opens on load) -->
  <div id="welcome-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card">
      <h2 style="font-family:'Great Vibes',cursive;font-size:3.2rem;margin:0;color:#ff4d8a">Happy Birthday, Teju!</h2>
      <p style="color:var(--muted);margin-top:10px;max-width:720px;margin-left:auto;margin-right:auto;">Today I celebrate you ‚Äî your laughter, your courage, the tiny things that made me fall. Open the surprise when you're ready. You deserve a year of gentle joy and wild, beautiful growth.</p>
      <div style="margin-top:18px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
        <button class="btn btn-primary" id="open-surprise-from-modal">Open Surprise</button>
        
      </div>
      <div style="margin-top:12px"><small style="color:var(--muted)">From ‚Äî Ayyanar</small></div>
    </div>
  </div>

  <script>
    // --- Init libraries ---
    AOS.init({duration:850,once:true});
    gsap.registerPlugin(ScrollTrigger);

    // Helper
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));

    // Loader
    window.addEventListener('load', ()=>{
      const loader = document.getElementById('loader');
      if(loader) setTimeout(()=>{ loader.style.display='none'; loader.setAttribute('aria-hidden','true'); },700);

      // reveal signature after load
      gsap.to('#signature',{opacity:1,duration:1,delay:0.9});

      // subtle entrance for hero name
      gsap.from('#hero-name',{y:8,opacity:0,duration:0.9,delay:1.0,ease:'power2.out'});
    });

    // Smooth nav
    document.querySelectorAll('nav.topbar a').forEach(a=>{
      a.addEventListener('click', e=>{
        e.preventDefault();
        document.querySelectorAll('nav.topbar a').forEach(x=>x.classList.remove('active'));
        a.classList.add('active');
        const id = a.dataset.target || a.getAttribute('href').replace('#','');
        const el = document.getElementById(id);
        if(el) el.scrollIntoView({behavior:'smooth'});
      });
    });

    // Hero 3D hearts (lightweight)
    (function(){
      const canvas = document.getElementById('hero-canvas');
      if(!canvas) return;
      const renderer = new THREE.WebGLRenderer({canvas,alpha:true,antialias:true});
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(55,innerWidth/innerHeight,0.1,1000);
      camera.position.z = 60; renderer.setSize(innerWidth,innerHeight);

      const light = new THREE.PointLight(0xffc0d8,1.2); light.position.set(50,50,50); scene.add(light);

      function heartShape(){ const x=0,y=0; const shape=new THREE.Shape(); shape.moveTo(x,y+0.5); shape.bezierCurveTo(x,y+0.5,x-0.5,y+0.9,x-1,y+0.3); shape.bezierCurveTo(x-1.5,y-0.1,x-0.6,y-1.4,x,y-0.6); shape.bezierCurveTo(x+0.6,y-1.4,x+1.5,y-0.1,x+1,y+0.3); shape.bezierCurveTo(x+0.5,y+0.9,x,y+0.5,x,y+0.5); return shape; }
      const geom = new THREE.ExtrudeGeometry(heartShape(),{depth:0.2,bevelEnabled:true,bevelSize:0.02});
      const mat = new THREE.MeshStandardMaterial({color:0xff5d9b,roughness:0.5,metalness:0.1});

      const hearts=[]; for(let i=0;i<60;i++){ const m=new THREE.Mesh(geom,mat); m.position.set((Math.random()-0.5)*120,(Math.random()-0.5)*60,(Math.random()-0.5)*60); const s=0.6+Math.random()*1.2; m.scale.set(s,s,s); m.rotation.set(Math.random()*2,Math.random()*2,Math.random()*2); scene.add(m); hearts.push({m,vy:0.01+Math.random()*0.03}); }

      function onResize(){ renderer.setSize(innerWidth,innerHeight); camera.aspect=innerWidth/innerHeight; camera.updateProjectionMatrix(); }
      addEventListener('resize',onResize);
      function loop(){ hearts.forEach(h=>{ h.m.position.y -= h.vy; h.m.rotation.x += 0.003; if(h.m.position.y < -45) h.m.position.y = 45; }); renderer.render(scene,camera); requestAnimationFrame(loop); } loop();
    })();

    // Custom cursor trail (subtle)
    const cursor = document.getElementById('cursor');
    if(cursor){
      const colors=['#ff6f9a','#ffd1e0','#ff9db9'];
      document.addEventListener('mousemove', e=>{
        cursor.style.left=(e.clientX-9)+'px';
        cursor.style.top=(e.clientY-9)+'px';
        cursor.style.width='16px';
        cursor.style.height='16px';
        cursor.style.borderRadius='9px';
        cursor.style.background = 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.95), rgba(255,255,255,0.1)), linear-gradient(90deg,'+colors[Math.floor(Math.random()*colors.length)]+', #ffd1e0)';
        cursor.style.boxShadow='0 8px 24px rgba(255,90,150,0.12)';
      });
    }

    // ---------- Improved Music Autoplay + Fade-in ----------
    const bgMusic = document.getElementById('bg-music');
    const musicFab = document.getElementById('music-fab');
    const musicIcon = document.getElementById('music-icon');

    // ensure initial volume is low for fade-in
    if(bgMusic){
      bgMusic.volume = 0.0;
      bgMusic.preload = 'auto';
      bgMusic.loop = true;
    }

    // small helper for icon swap
    function setPlayingUI(isPlaying){
      musicFab.setAttribute('aria-pressed', String(!!isPlaying));
      if(isPlaying){
        // pause icon
        musicIcon.innerHTML = '<path d=\"M6 5h4v14H6zM14 5h4v14h-4z\"/>';
        musicFab.setAttribute('aria-label','Pause background music');
        musicFab.title = 'Pause music';
      } else {
        // play icon
        musicIcon.innerHTML = '<path d=\"M5 3v18l14-9L5 3z\"/>';
        musicFab.setAttribute('aria-label','Play background music');
        musicFab.title = 'Play music';
      }
    }
    setPlayingUI(false);

    // fade-in function (volume ramp)
    function fadeAudioTo(targetVol, duration = 600){
      if(!bgMusic) return;
      const start = performance.now();
      const initial = bgMusic.volume;
      const delta = targetVol - initial;
      function step(now){
        const t = Math.min(1, (now - start) / duration);
        bgMusic.volume = initial + delta * t;
        if(t < 1) requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }

    // Start music after first user gesture (best cross-browser approach)
    let musicStarted = false;
    function userGestureStartMusic(){
      if(!bgMusic) return;
      if(musicStarted) return;
      bgMusic.play().then(()=>{
        // fade to comfortable volume
        fadeAudioTo(0.66, 800);
        setPlayingUI(true);
      }).catch((err)=>{
        // play was blocked ‚Äî this may still run on some restricted browsers
        console.log('Play blocked:', err);
      });
      musicStarted = true;
      // remove listeners
      document.removeEventListener('click', userGestureStartMusic);
      document.removeEventListener('touchstart', userGestureStartMusic);
      document.removeEventListener('scroll', userGestureStartMusic);
    }
    document.addEventListener('click', userGestureStartMusic, { once: true });
    document.addEventListener('touchstart', userGestureStartMusic, { once: true });
    document.addEventListener('scroll', userGestureStartMusic, { once: true });

    // Manual toggle (FAB)
    musicFab.addEventListener('click', ()=>{
      if(!bgMusic) return;
      if(bgMusic.paused){
        bgMusic.play().then(()=>{
          fadeAudioTo(0.66, 600);
          setPlayingUI(true);
        }).catch(()=>{ /* ignore */ });
      } else {
        // fade out then pause
        fadeAudioTo(0.0, 450);
        setTimeout(()=>{ bgMusic.pause(); setPlayingUI(false); }, 480);
      }
    });

    // Keep button text elsewhere in page in sync (if you keep toggle)
    const toggleMusicBtn = document.getElementById('toggle-music');
    if(toggleMusicBtn){
      toggleMusicBtn.addEventListener('click', ()=>musicFab.click());
    }

    // Update UI when music plays/pauses (in case user controls via keyboard)
    if(bgMusic){
      bgMusic.addEventListener('play', ()=>setPlayingUI(true));
      bgMusic.addEventListener('pause', ()=>setPlayingUI(false));
    }

    // ---------- Page interactions ----------
    // Start journey button
    const startJourney = document.getElementById('start-journey');
    if(startJourney){
      startJourney.addEventListener('click', ()=>{ const el=document.getElementById('met'); if(el) el.scrollIntoView({behavior:'smooth'}); confetti({particleCount:120,spread:110,origin:{y:0.17}}); });
    }

    // Video overlay handlers (local)
    const thumb = document.querySelector('.video-thumb-local');
    const overlay = document.getElementById('video-local-overlay');
    const player = document.getElementById('video-local-player');
    const backBtn = document.getElementById('video-local-back');
    function openLocal(videoSrc){
      if(!player||!overlay) return;
      player.src = videoSrc;
      overlay.style.display = 'flex';
      overlay.setAttribute('aria-hidden','false');
      player.currentTime = 0;
      player.play().catch(()=>{});
      document.body.style.overflow = 'hidden';
    }
    function closeLocal(){
      if(!player||!overlay) return;
      player.pause();
      player.src = '';
      overlay.style.display = 'none';
      overlay.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
      const videos=document.getElementById('videos');
      if(videos) videos.scrollIntoView({behavior:'smooth'});
    }
    if(thumb){
      thumb.addEventListener('click', ()=>openLocal(thumb.dataset.video));
      thumb.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); openLocal(thumb.dataset.video); } });
    }
    if(backBtn) backBtn.addEventListener('click', closeLocal);
    if(overlay) overlay.addEventListener('click', e=>{ if(e.target===overlay) closeLocal(); });
    document.addEventListener('keydown', e=>{ if(e.key==='Escape') closeLocal(); });

    // Big video modal close
    const bigModal = document.getElementById('video-modal');
    const bigClose = document.getElementById('close-video');
    const bigPlayer = document.getElementById('video-player');
    if(bigClose){
      bigClose.addEventListener('click', ()=>{
        if(bigPlayer){ bigPlayer.pause(); bigPlayer.src=''; }
        if(bigModal) bigModal.style.display='none';
      });
    }

    // Surprise reveal
    const revealBtn = document.getElementById('reveal');
    const revealSweet = document.getElementById('reveal-sweet');
    const surpriseBox = document.getElementById('surprise-box');
    function showSurprise(extra){
      if(!surpriseBox) return;
      surpriseBox.style.display='block';
      surpriseBox.innerHTML='';
      const title = document.createElement('h3'); title.textContent='For Teju ‚Äî A Short Message'; title.style.fontFamily='Playfair Display'; surpriseBox.appendChild(title);
      const p = document.createElement('p'); p.textContent='I recorded this so you could hear my voice ‚Äî gentle, sincere. No pressure, just a wish, and a hope for brighter mornings.'; p.style.color='var(--muted)'; surpriseBox.appendChild(p);
      const v = document.createElement('video'); v.src='Files/videos/surprise.mp4'; v.controls=true; v.playsInline = true; v.style.width='100%'; v.style.borderRadius='10px'; v.style.marginTop='10px'; surpriseBox.appendChild(v);
      if(extra){ const poem=document.createElement('blockquote'); poem.innerHTML='<em>When silence grew between us, remember ‚Äî I keep your laughter safe in the small corners of my day.</em>'; poem.style.marginTop='12px'; poem.style.fontStyle='italic'; poem.style.color='#8a4b6a'; surpriseBox.appendChild(poem); }
      gsap.fromTo(surpriseBox,{scale:0.95,opacity:0},{scale:1,opacity:1,duration:0.6,ease:'back.out(1.2)'});
      // Ensure a user gesture is registered if they click reveal (so music can start)
      userGestureStartMusic();
    }
    if(revealBtn) revealBtn.addEventListener('click', ()=>{ confetti({particleCount:220,spread:170,origin:{y:0.35}}); showSurprise(false); });
    if(revealSweet) revealSweet.addEventListener('click', ()=>{ confetti({particleCount:380,spread:220,origin:{y:0.35}}); showSurprise(true); });

    // Cheer button -> confetti + small animation
    const cheerBtn = document.getElementById('cheer-btn');
    if(cheerBtn){ cheerBtn.addEventListener('click', ()=>{ const farewell=document.querySelector('.farewell-text'); if(farewell) gsap.fromTo(farewell,{y:0,scale:1},{y:-8,scale:1.02,duration:0.35,yoyo:true,repeat:1}); confetti({particleCount:120,spread:100,origin:{y:0.3}}); }); }

    // Keyboard shortcut S for surprise
    document.addEventListener('keydown', e=>{ if(e.key && e.key.toLowerCase()==='s'){ if(revealBtn) revealBtn.click(); } });

    // Typewriter for hero name
    (function(){ const el=document.getElementById('hero-name'); if(!el) return; const text=el.textContent.trim(); el.textContent=''; let i=0; const iv=setInterval(()=>{ el.textContent += text[i++]||''; if(i>text.length) clearInterval(iv); },60); })();

    // Signature handwriting effect
    gsap.to('#signature',{opacity:1, duration:1.2, delay:1.5, onStart:()=>{ const sig = document.getElementById('signature'); if(sig) sig.style.transformOrigin='left center'; }, ease:'power2.out'});

    // Download card as printable PDF (opens printable window)
    const downloadBtn = document.getElementById('download-card');
    if(downloadBtn){ downloadBtn.addEventListener('click', ()=>{
      const cardHtml = `
        <html><head><title>Birthday Card for Teju</title><style>body{font-family:Arial; padding:40px;} .card{border-radius:12px;padding:30px;border:1px solid #f2d9e6;background:linear-gradient(180deg,#fff,#fff6fb)} h1{color:#ff4d8a;} p{color:#333}</style></head><body><div class="card"><h1>Happy Birthday Teju üéâ</h1><p>Wishing you soft mornings, brave choices, and endless reasons to smile. ‚Äî Ayyanar</p></div></body></html>`;
      const w = window.open('','_blank'); if(!w) return alert('Please allow popups to download the card.'); w.document.write(cardHtml); w.document.close(); w.print();
    }); }

    // Welcome modal controls
    const welcomeModal = document.getElementById('welcome-modal');
    const openSurpriseFromModal = document.getElementById('open-surprise-from-modal');
    const closeWelcomeBtn = document.getElementById('close-welcome');
    function openWelcome(){ if(welcomeModal) { welcomeModal.classList.add('open'); welcomeModal.setAttribute('aria-hidden','false'); } }
    function closeWelcome(){ if(welcomeModal) { welcomeModal.classList.remove('open'); welcomeModal.setAttribute('aria-hidden','true'); } }
    if(closeWelcomeBtn) closeWelcomeBtn.addEventListener('click', closeWelcome);
    if(openSurpriseFromModal) openSurpriseFromModal.addEventListener('click', ()=>{ closeWelcome(); if(revealBtn) revealBtn.click(); });
    setTimeout(()=>{ openWelcome(); confetti({particleCount:90,spread:120,origin:{y:0.2}}); }, 700);

    // Videos back to top
    const videosBack = document.getElementById('videos-back');
    if(videosBack) videosBack.addEventListener('click', ()=>{ document.getElementById('welcome').scrollIntoView({behavior:'smooth'}); });

    // Responsive tweak for polaroids
    window.addEventListener('resize', ()=>{ if(innerWidth < 520) document.querySelectorAll('.polaroid img').forEach(i=>i.style.height='160px'); });

    // Small console note
    console.log('Birthday page ready ‚Äî happy birthday, Teju üéâ');
  </script>
</body>
</html>
